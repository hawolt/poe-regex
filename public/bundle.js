!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,(()=>(()=>{"use strict";const e="#% more Monster Life",t="#% more Monster Life Monsters cannot be Stunned",n="Monsters gain #% of their Physical Damage as Extra Chaos Damage",o="Monsters gain #% of their Physical Damage as Extra Chaos Damage Monsters Inflict Withered for 2 seconds on Hit",s="Monsters reflect #% of Elemental Damage",r="Monsters reflect #% of Physical Damage",a="Monsters reflect #% of Physical Damage Monsters reflect #% of Elemental Damage",i="Monsters fire 2 additional Projectiles",l="Monsters have #% increased Area of Effect",c="Monsters have #% increased Area of Effect Monsters fire 2 additional Projectiles",d="Monsters Poison on Hit",f="Monsters Poison on Hit All Damage from Monsters' Hits can Poison Monsters have #% increased Poison Duration",h="Players are Cursed with Elemental Weakness",g="Players are Cursed with Temporal Chains",u="Players are Cursed with Vulnerability",m="Players are Cursed with Vulnerability Players are Cursed with Temporal Chains Players are Cursed with Elemental Weakness",y="+#% Monster Physical Damage Reduction",M="+#% Monster Chaos Resistance +#% Monster Elemental Resistances",C="+#% Monster Physical Damage Reduction +#% Monster Chaos Resistance +#% Monster Elemental Resistances",E="Monsters gain a Frenzy Charge on Hit",p="Monsters have +1 to Maximum Frenzy Charges Monsters gain a Frenzy Charge on Hit",w="Monsters gain a Power Charge on Hit",L="Monsters have +1 to Maximum Power Charges Monsters gain a Power Charge on Hit",b="#% increased number of Rare Monsters",x="#% increased number of Rare Monsters Rare Monsters each have 2 additional Modifiers",P=new Map([[e,[e,t]],[t,[e,t]],[n,[n,o]],[o,[n,o]],[s,[s,a]],[r,[r,a]],[a,[s,r,a]],[i,[i,c]],[l,[l,c]],[c,[l,i,c]],[d,[d,f]],[f,[d,f]],[h,[h,m]],[u,[u,m]],[g,[g,m]],[m,[h,u,g]],[y,[y,M,C]],[M,[y,M,C]],[C,[y,M,C]],[E,[E,p]],[p,[E,p]],[w,[w,L]],[L,[w,L]],[b,[b,x]],[x,[b,x]]]);function v(e){const t=new Set(e),n=Array.from(P.keys());for(const o of e){const e=n.filter((e=>o===e));for(const n of e){const e=P.get(n)||[];for(const n of e)t.add(n)}}return Array.from(t)}class I{constructor(e,t){this.mod=e,this.t17=t}getModifier(){return this.mod}isT17(){return this.t17}}var S;function k(e,t){let n=[],o=e.toLowerCase();for(let e=0;e<o.length;e++)for(let s=e+1;s<=o.length;s++){let r=o.substring(e,s);1!=r.length&&(t.blacklisted(r)||n.push(r))}return n.sort(((e,t)=>e.length-t.length)),n}!function(e){e[e.INCLUSIVE=0]="INCLUSIVE",e[e.EXCLUSIVE=1]="EXCLUSIVE"}(S||(S={}));class D{constructor(e,t){this.modifiers=e,this.blacklist=t}match(e,t){for(let n=0;n<this.modifiers.length;n++){let o=this.modifiers[n];if(o.getModifier().toLowerCase().includes(e)&&!t.includes(o.getModifier()))return!1}return!0}create(e,t){let n=new Set;for(let e=0;e<t.length;e++)k(t[e],this.blacklist).forEach((e=>n.add(e)));const o=new Map;let s=2,r=!1;for(;t.length>0;){const e=s,a=Array.from(n).filter((t=>t.length===e));if(0===a.length&&r)break;for(const e of a){if(e.length>=20)break;if(this.match(e,t))for(const n of t)n.toLowerCase().includes(e.toLowerCase())&&(o.has(e)||o.set(e,0),o.set(e,(o.get(e)||0)+1),r||(r=!0))}s+=1}let a=Array.from(o.entries());a.sort(((e,t)=>{const n=t[1]-e[1];return 0!==n?n:e[0].length+(e[0].includes("#")?2:0)-(t[0].length+(t[0].includes("#")?2:0))}));const i=a[0][0];t=t.filter((e=>!e.toLowerCase().includes(i))),e.add(i),0!==t.length&&(v(t),this.create(e,t))}}class T{constructor(){this.blacklist=new Set}populate(e){for(let t=0;t<e.length;t++)this.blacklist.add(e[t].toLowerCase())}blacklisted(e){for(let t of this.blacklist)if(t.includes(e.toLowerCase()))return!0;return!1}}const A=performance.now();let R=new T,V=[],H=[],B=[];function U(){let e=new D(V,R),t=new Set;try{e.create(t,v(H));let n=Array.from(t).join("|").replace(/#/g,"\\d+");n=`"!${n}"`,document.getElementById("regex").innerText=n,document.getElementById("hint").innerText=`length: ${n.length} / 50`}catch(e){console.error(e)}j(!1)}function j(e){console.log("modal show: "+e);const t=document.getElementById("overlay"),n=document.getElementById("modal"),o=document.body;t.classList.toggle("hidden",!e),n.classList.toggle("hidden",!e),o.classList.toggle("no-scroll",e)}async function $(e){const t=e.map((e=>fetch(e).then((t=>{if(!t.ok)throw new Error(`Failed to load ${e}: ${t.status} ${t.statusText}`);return t.text()}))));return Promise.all(t)}function F(e,t){const n=document.createElement("div");return n.className="selectable",n.dataset.t17=t.isT17().toString(),n.textContent=t.getModifier(),n.addEventListener("click",(n=>{let o=n.target;o.classList.toggle("selected-item");let s=o.classList.contains("selected-item"),r=e==S.EXCLUSIVE?H:B;if(s)r.push(t.getModifier());else{const e=r.indexOf(t.getModifier());e>-1&&r.splice(e,1)}})),n}return document.addEventListener("DOMContentLoaded",(()=>{$(["./league/settler/map.name.config","./league/settler/map.affix.config","./league/settler/map.general.config"]).then((e=>function(e){const t=new T;for(let n=0;n<e.length;n++){let o=e[n].split("\n");t.populate(o)}return t}(e))).then((e=>{R=e,async function(){$(["./league/settler/map.mods.config"]).then((e=>e[0])).then((e=>function(e){let t=e.split("\n"),n=document.querySelectorAll(".mod-container");for(let e=0;e<t.length;e++){let o=t[e].trim(),s=o.indexOf("(T17)");-1!=s&&(o=o.substring(6));const r=new I(o,-1==s);V.push(r);for(let e=0;e<n.length;e++){let t=0==e?S.EXCLUSIVE:S.INCLUSIVE;n[e].appendChild(F(t,r))}}}(e)))}().then((()=>(document.querySelectorAll(".container-search").forEach((e=>{e.addEventListener("input",(e=>{var t;const n=e.target.value,o=null===(t=e.target.closest(".container-search"))||void 0===t?void 0:t.nextElementSibling;if(o&&o.classList.contains("mod-container")){let e=o.children;for(let t=0;t<e.length;t++){const o=e[t];o.textContent&&o.textContent.toLowerCase().includes(n)?o.style.display="":o.style.display="none"}}}))})),void document.getElementById("generate").addEventListener("click",(()=>{document.getElementById("hint").innerText="length: 0 / 50",document.getElementById("regex").innerText="",setTimeout(U,1e3),j(!0)}))))).then((()=>function(){const e=performance.now()-A;console.log(`build-time ${e}ms`)}()))})).catch((e=>function(e){console.error(e)}(e)))})),{}})()));