!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var s in n)("object"==typeof exports?exports:e)[s]=n[s]}}(self,(()=>(()=>{"use strict";const e="Players have -#% to all maximum Resistances",t="Players have -#% to all maximum Resistances",n="#% more Monster Life",s="#% more Monster Life Monsters cannot be Stunned",o="Monsters gain #% of their Physical Damage as Extra Chaos Damage",r="Monsters gain #% of their Physical Damage as Extra Chaos Damage Monsters Inflict Withered for 2 seconds on Hit",a="Monsters reflect #% of Elemental Damage",i="Monsters reflect #% of Physical Damage",l="Monsters reflect #% of Physical Damage Monsters reflect #% of Elemental Damage",c="Monsters fire 2 additional Projectiles",d="Monsters have #% increased Area of Effect",f="Monsters have #% increased Area of Effect Monsters fire 2 additional Projectiles",h="Monsters Poison on Hit",m="Monsters Poison on Hit All Damage from Monsters' Hits can Poison Monsters have #% increased Poison Duration",u="Players are Cursed with Elemental Weakness",g="Players are Cursed with Temporal Chains",y="Players are Cursed with Vulnerability",M="Players are Cursed with Vulnerability Players are Cursed with Temporal Chains Players are Cursed with Elemental Weakness",C="+#% Monster Physical Damage Reduction",E="+#% Monster Chaos Resistance +#% Monster Elemental Resistances",p="+#% Monster Physical Damage Reduction +#% Monster Chaos Resistance +#% Monster Elemental Resistances",w="Monsters gain a Frenzy Charge on Hit",L="Monsters have +1 to Maximum Frenzy Charges Monsters gain a Frenzy Charge on Hit",v="Monsters gain a Power Charge on Hit",P="Monsters have +1 to Maximum Power Charges Monsters gain a Power Charge on Hit",b="#% increased number of Rare Monsters",x="#% increased number of Rare Monsters Rare Monsters each have 2 additional Modifiers",I=new Map([[e,[e,t]],[t,[e,t]],[n,[n,s]],[s,[n,s]],[o,[o,r]],[r,[o,r]],[a,[a,l]],[i,[i,l]],[l,[a,i,l]],[c,[c,f]],[d,[d,f]],[f,[d,c,f]],[h,[h,m]],[m,[h,m]],[u,[u,M]],[y,[y,M]],[g,[g,M]],[M,[u,y,g]],[C,[C,E,p]],[E,[C,E,p]],[p,[C,E,p]],[w,[w,L]],[L,[w,L]],[v,[v,P]],[P,[v,P]],[b,[b,x]],[x,[b,x]]]);function R(e){const t=new Set(e),n=Array.from(I.keys());for(const s of e){const e=n.filter((e=>s===e));for(const n of e){const e=I.get(n)||[];for(const n of e)t.add(n)}}return Array.from(t)}class D{constructor(e,t){this.mod=e,this.t17=t}getModifier(){return this.mod}isT17(){return this.t17}}var S;!function(e){e[e.INCLUSIVE=0]="INCLUSIVE",e[e.EXCLUSIVE=1]="EXCLUSIVE"}(S||(S={}));const A=["Travel to this Map by using it in a personal Map Device. Maps can only be used once.","Modifiable only with Chaos Orbs, Vaal Orbs, Delirium Orbs and Chisels","Players in Area are #% Delirious (enchant)","Monster Pack Size:","Item Class: Maps","Monster Level:","Item Quantity:","Rarity: Unique","Rarity: Normal","Rarity: Magic","Rarity: Rare","Item Rarity:","Item Level:","Map Tier:"];function T(e){return A.some((t=>t.toLowerCase().includes(e)))}function V(e){let t=[],n=e.toLowerCase();for(let e=0;e<n.length;e++)for(let s=e+1;s<=n.length;s++){let o=n.substring(e,s);1!=o.length&&(T(o)||t.push(o))}return t.sort(((e,t)=>e.length-t.length)),t}class k{constructor(e){this.modifiers=e}match(e,t){for(let n=0;n<this.modifiers.length;n++){let s=this.modifiers[n];if(s.getModifier().toLowerCase().includes(e)&&!t.includes(s.getModifier()))return!1}return!0}create(e,t){let n=new Set;for(let e=0;e<t.length;e++)V(t[e]).forEach((e=>n.add(e)));const s=new Map;let o=2;for(;t.length>0;){const e=o,r=Array.from(n).filter((t=>t.length===e));if(0===r.length)break;for(const e of r){if(e.length>=20)break;if(this.match(e,t))for(const n of t)n.toLowerCase().includes(e.toLowerCase())&&(s.has(e)||s.set(e,0),s.set(e,(s.get(e)||0)+1))}o+=1}let r=Array.from(s.entries());r.sort(((e,t)=>{const n=t[1]-e[1];return 0!==n?n:e[0].length+(e[0].includes("#")?2:0)-(t[0].length+(t[0].includes("#")?2:0))}));const a=r[0][0];t=t.filter((e=>!e.toLowerCase().includes(a))),e.add(a),0!==t.length&&(R(t),this.create(e,t))}}const H=performance.now();let U=[],j=[],O=[];function B(e){const t=document.getElementById("overlay"),n=document.getElementById("modal"),s=document.body;t.classList.toggle("hidden",!e),n.classList.toggle("hidden",!e),s.classList.toggle("no-scroll",e)}function N(e,t){const n=document.createElement("div");return n.className="selectable",n.dataset.t17=t.isT17().toString(),n.textContent=t.getModifier(),n.addEventListener("click",(n=>{let s=n.target;s.classList.toggle("selected-item");let o=s.classList.contains("selected-item"),r=e==S.EXCLUSIVE?j:O;if(o)r.push(t.getModifier());else{const e=r.indexOf(t.getModifier());e>-1&&r.splice(e,1)}})),n}return document.addEventListener("DOMContentLoaded",(()=>{(async function(){try{const e=await fetch("./league/settler/map.mods.config");if(!e.ok)throw new Error(`HTTP: ${e.status}`);!function(e){let t=e.split("\n"),n=document.querySelectorAll(".mod-container");for(let e=0;e<t.length;e++){let s=t[e].trim(),o=s.indexOf("(T17)");-1!=o&&(s=s.substring(6));const r=new D(s,-1==o);U.push(r);for(let e=0;e<n.length;e++){let t=0==e?S.EXCLUSIVE:S.INCLUSIVE;n[e].appendChild(N(t,r))}}}(await e.text())}catch(e){!function(e){console.error(e)}(e)}})().then((()=>(document.querySelectorAll(".container-search").forEach((e=>{e.addEventListener("input",(e=>{var t;const n=e.target.value,s=null===(t=e.target.closest(".container-search"))||void 0===t?void 0:t.nextElementSibling;if(s&&s.classList.contains("mod-container")){let e=s.children;for(let t=0;t<e.length;t++){const s=e[t];s.textContent&&s.textContent.toLowerCase().includes(n)?s.style.display="":s.style.display="none"}}}))})),void document.getElementById("generate").addEventListener("click",(()=>{B(!0),function(){let e=new k(U),t=new Set;e.create(t,R(j));let n=Array.from(t).join("|").replace(/#/g,"\\d+");n=`"!${n}"`,document.getElementById("regex").innerText=n,document.getElementById("hint").innerText=`length: ${n.length} / 50`,B(!1)}()}))))).then((()=>function(){const e=performance.now()-H;console.log(`build-time ${e}ms`)}()))})),{}})()));