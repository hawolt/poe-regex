!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,(()=>(()=>{"use strict";var e;class t{constructor(e,t){this.mod=e,this.t17=t}getModifier(){return this.mod}isT17(){return this.t17}equals(e){return this===e||!!e&&this.mod===e.getModifier()&&this.t17===e.isT17()}}function n(e,t){let n=[],o=e.getModifier().toLowerCase();for(let e=0;e<o.length;e++)for(let r=e+1;r<=o.length;r++){let s=o.substring(e,r);1!=s.length&&(t.blacklisted(s)||n.push(s))}return n.sort(((e,t)=>e.length-t.length)),n}!function(e){e[e.INCLUSIVE=0]="INCLUSIVE",e[e.EXCLUSIVE=1]="EXCLUSIVE"}(e||(e={}));class o{constructor(e,t,n){this.modifiers=t,this.blacklist=n,this.t17=e}includes(e,t){for(const n of t)if(n.equals(e))return!0;return!1}unique(e,t){for(let n=0;n<this.modifiers.length;n++){let o=this.modifiers[n];if(o.getModifier().toLowerCase().includes(e)){if(o.isT17()&&!this.t17)continue;if(!this.includes(o,t))return!1}}return!0}create(e,t,o){if(0===o.length)return;o=e.upgrade(this.t17,o);let r=new Set;for(let e=0;e<o.length;e++)n(o[e],this.blacklist).forEach((e=>r.add(e)));const s=new Map;let i=2;for(;o.length>0;){const e=i,t=Array.from(r).filter((t=>t.length===e));if(0===t.length&&s.size>0)break;for(const e of t){if(e.length>=20)break;if(this.unique(e,o))for(const t of o)t.getModifier().toLowerCase().includes(e.toLowerCase())&&(s.has(e)||s.set(e,0),s.set(e,(s.get(e)||0)+1))}i+=1}let l=Array.from(s.entries());l.sort(((e,t)=>{const n=t[1]-e[1];return 0!==n?n:e[0].length+(e[0].includes("#")?2:0)-(t[0].length+(t[0].includes("#")?2:0))}));const c=l[0][0];o=o.filter((e=>!e.getModifier().toLowerCase().includes(c))),t.add(c),this.create(e,t,o)}}class r{constructor(){this.blacklist=new Set}populate(e){for(let t=0;t<e.length;t++)this.blacklist.add(e[t].toLowerCase())}blacklisted(e){for(let t of this.blacklist)if(t.includes(e))return!0;return!1}}class s{constructor(e){this.array=[[91,[92]],[92,[91]],[19,[61]],[61,[19]],[50,[51,28]],[51,[50,28]],[28,[50,51]],[62,[65,26]],[65,[62,26]],[26,[62,65]],[67,[15]],[15,[67]],[73,[75,76,34]],[75,[73,76,34]],[76,[73,75,34]],[34,[73,75,76]],[87,[93,2]],[93,[87,2]],[2,[87,93]],[103,[22]],[22,[103]],[104,[23]],[23,[104]],[126,[1]],[1,[126]]],this.mapping=new Map;let n=new Map;for(let o=0;o<this.array.length;o++){let r=this.array[o][0],s=e[r],i=new t(s.getModifier(),s.isT17());n.set(r,i)}for(let e=0;e<this.array.length;e++){let t=this.array[e],o=t[0],r=t[1],s=n.get(o),i=[];for(let e=0;e<r.length;e++){let t=r[e],o=n.get(t);o&&i.push(o)}s&&i&&this.mapping.set(s,i)}}upgrade(e,t){const n=new Set(t),o=Array.from(this.mapping.keys());for(const r of t)for(const t of o)if(r.equals(t)){let o=this.mapping.get(t)||[];for(const t of o)t.isT17()&&!e||n.add(t)}return Array.from(n)}}const i=performance.now();let l=new r,c=[],a=[],d=[];function f(){let e=new o(!1,c,l),t=new Set,n=new s(c);try{e.create(n,t,a);let o=Array.from(t).join("|").replace(/#/g,"\\d+");o=`"!${o}"`,document.getElementById("regex").innerText=o,document.getElementById("hint").innerText=`length: ${o.length} / 50`}catch(e){console.error(e)}u(!1)}function u(e){const t=document.getElementById("overlay"),n=document.getElementById("modal"),o=document.body;t.classList.toggle("hidden",!e),n.classList.toggle("hidden",!e),o.classList.toggle("no-scroll",e)}async function h(e){const t=e.map((e=>fetch(e).then((t=>{if(!t.ok)throw new Error(`Failed to load ${e}: ${t.status} ${t.statusText}`);return t.text()}))));return Promise.all(t)}function g(t,n){const o=document.createElement("div");return o.className="selectable",o.dataset.t17=n.isT17().toString(),o.textContent=n.getModifier(),o.addEventListener("click",(o=>{let r=o.target;r.classList.toggle("selected-item");let s=r.classList.contains("selected-item"),i=t==e.EXCLUSIVE?a:d;if(s)i.push(n);else{const e=i.indexOf(n);e>-1&&i.splice(e,1)}})),o}return document.addEventListener("DOMContentLoaded",(()=>{h(["./league/settler/map.name.config","./league/settler/map.affix.config","./league/settler/map.general.config"]).then((e=>function(e){const t=new r;for(let n=0;n<e.length;n++){let o=e[n].split("\n");t.populate(o)}return t}(e))).then((n=>{l=n,async function(){h(["./league/settler/map.mods.config"]).then((e=>e[0])).then((n=>function(n){let o=n.split("\n"),r=document.querySelectorAll(".mod-container");for(let n=0;n<o.length;n++){let s=o[n].trim(),i=s.indexOf("(T17)");-1!=i&&(s=s.substring(6));const l=new t(s,-1!=i);c.push(l);for(let t=0;t<r.length;t++){let n=0==t?e.EXCLUSIVE:e.INCLUSIVE;r[t].appendChild(g(n,l))}}}(n)))}().then((()=>(document.querySelectorAll(".container-search").forEach((e=>{e.addEventListener("input",(e=>{var t;const n=e.target.value,o=null===(t=e.target.closest(".container-search"))||void 0===t?void 0:t.nextElementSibling;if(o&&o.classList.contains("mod-container")){let e=o.children;for(let t=0;t<e.length;t++){const o=e[t];o.textContent&&o.textContent.toLowerCase().includes(n)?o.style.display="":o.style.display="none"}}}))})),void document.getElementById("generate").addEventListener("click",(()=>{document.getElementById("hint").innerText="length: 0 / 50",document.getElementById("regex").innerText="",setTimeout(f,1e3),u(!0)}))))).then((()=>function(){const e=performance.now()-i;console.log(`build-time ${e}ms`)}()))})).catch((e=>function(e){console.error(e)}(e)))})),{}})()));